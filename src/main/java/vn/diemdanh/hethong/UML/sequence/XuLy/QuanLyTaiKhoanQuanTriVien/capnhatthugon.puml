@startuml
!theme plain
title Luồng cập nhật tài khoản quản trị viên

actor "Quản trị viên" as User

participant "Danh sách tài khoản\n(Component)" as Component
participant "adminService.js\n(Frontend Service)" as FrontendService
participant "AdminController.java\n(Controller)" as Controller
participant "AdminService.java\n(Service)" as Service
participant "AdminRepository.java\n(Repository)" as Repository
database "CSDL" as DB

User -> Component: Click "Sửa" tài khoản
Component -> FrontendService: Gửi dữ liệu cập nhật
FrontendService -> Controller: PUT /api/admin/{id}
Controller -> Service: updateAdmin(id, request)

Service -> Repository: findById(id)
alt Không tìm thấy
    Repository --> Service: null
    Service --> Controller: Ném lỗi
    Controller --> FrontendService: Error response
    FrontendService --> Component: Hiển thị lỗi
else Tìm thấy
    Repository --> Service: Admin entity
    Service -> Repository: save(updatedAdmin)
    Repository -> DB: UPDATE admin SET ... WHERE id = ?
    DB --> Repository: Updated entity
    Repository --> Service: Admin entity
    Service --> Controller: AdminDto
    Controller --> FrontendService: Success response
    FrontendService --> Component: Hiển thị thành công
    Component -> Component: Cập nhật danh sách
end
@enduml
