@startuml
!theme plain
title Thêm lịch giảng dạy mới

actor "Admin" as admin
participant "DanhSachLichComponents.jsx" as component
participant "Ant Design Modal & Form" as modal
participant "LichGdService.js" as lichGdService
participant "LichGdController" as controller
participant "LichGdService (BE)" as service
participant "LichGdRepository" as repository
database "Database" as db

admin -> component: Click "Thêm lịch giảng dạy"
component -> modal: Hiển thị form nhập thông tin
modal -> admin: Điền thông tin và nhấn "Lưu"
modal -> component: onFinish(values)
component -> component: form.validateFields()
component -> lichGdService: createLichGd(values)
lichGdService -> controller: POST /api/lich-giang-day
controller -> service: createLichGd(request)
service -> repository: findById(maLich)
repository -> db: SELECT * FROM lich_giang_day WHERE maLich = ?
repository --> service: Optional<LichGd>
alt Mã lịch đã tồn tại
    service --> controller: 400 Bad Request
    controller --> lichGdService: Error response
    lichGdService --> component: message.error("Mã lịch đã tồn tại")
else Mã lịch chưa tồn tại
    service -> repository: save(lichGd)
    repository -> db: INSERT INTO lich_giang_day ...
    repository --> service: LichGd entity
    service --> controller: 200 OK
    controller --> lichGdService: Success response
    lichGdService --> component: message.success("Thêm lịch giảng dạy thành công")
    component -> component: fetchData() - Làm mới danh sách
end
@enduml 