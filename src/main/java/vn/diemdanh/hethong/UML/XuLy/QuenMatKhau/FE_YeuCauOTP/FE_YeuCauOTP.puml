@startuml
!theme plain
title 1. Yêu cầu OTP - Frontend

actor User as U
participant "QuenMatKhauFORMComponents.jsx" as FP
participant "matKhauService.js" as MS
participant "api.js" as API

== Bước 1: Yêu cầu OTP từ Frontend ==

U -> FP: Truy cập /:userType/forgot-password
'note right: Ví dụ: /student/forgot-password

U -> FP: Nhập email vào form
FP -> FP: Validate email không rỗng

U -> FP: Nhấn "Gửi mã xác nhận"
FP -> FP: handleSubmit()

FP -> MS: requestOTP(email, userType)
MS -> API: authAPI.requestOTP(email, userType)

API -> API: Gửi POST request tới endpoint:
note right of API
- STUDENT/TEACHER: /api/password-reset/user/request-otp
- ADMIN: /api/password-reset/admin/request-otp
Payload: { email }
end note

alt Thành công
    API -> MS: Response thành công
    MS -> FP: Success response
    FP -> FP: Lưu email vào sessionStorage (resetEmail)
    FP -> U: Chuyển hướng tới /:userType/verify-otp
else Thất bại
    API -> MS: Error response
    MS -> FP: Error (ví dụ: "Email không tồn tại")
    FP -> U: Hiển thị thông báo lỗi
end

@enduml